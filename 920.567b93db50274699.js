"use strict";(self.webpackChunkborsa=self.webpackChunkborsa||[]).push([[920],{7920:(D,p,a)=>{a.r(p),a.d(p,{DetailComponent:()=>b});var r=a(5861),t=a(1571),l=a(7556),u=a(9430),f=a(3250),h=a(890),d=a(6895),v=a(6534),s=a(5439),C=a(2417);function x(n,i){1&n&&t._UZ(0,"div",9),2&n&&t.Q6J("comment",i.$implicit)}function _(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,x,1,1,"div",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.comments)}}function T(n,i){1&n&&(t.TgZ(0,"div")(1,"div",10),t._uU(2,"Hen\xfcz hi\xe7 yorum yap\u0131lmam\u0131\u015f."),t.qZA()())}function Z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._uU(2,"Yorum Ekle"),t.qZA(),t.TgZ(3,"div",4)(4,"div",11),t._UZ(5,"img",12),t._uU(6),t.qZA(),t.TgZ(7,"textarea",13),t.NdJ("change",function(m){t.CHM(e);const c=t.oxw();return t.KtG(c.commentTxtChange(m))})("keyup",function(m){t.CHM(e);const c=t.oxw();return t.KtG(c.commentTxtChange(m))})("keydown",function(m){t.CHM(e);const c=t.oxw();return t.KtG(c.commentTxtChange(m))}),t.qZA()(),t.TgZ(8,"div",14)(9,"input",15),t.NdJ("click",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.submitComment())}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("src",e.authService.Get().photoUrl,t.LSH),t.xp6(1),t.AsE(" ",e.authService.Get().firstName," ",e.authService.Get().lastName," "),t.xp6(1),t.Q6J("value",e.comment)}}function y(n,i){1&n&&(t.TgZ(0,"div")(1,"div",2)(2,"div",3),t._uU(3,"Yorum Yap"),t.qZA(),t.TgZ(4,"div",16),t._uU(5," Yorum yazabilmek i\xe7in l\xfctfen "),t.TgZ(6,"a",17),t._uU(7," giri\u015f yap\u0131n\u0131z "),t.qZA(),t._uU(8,". "),t.qZA()()())}let w=(()=>{class n{constructor(e){this.authService=e,this.API_URL="https://borsa-db.vercel.app",this.moment=s,this.comment="",this.comments=[]}ngOnInit(){var e=this;return(0,r.Z)(function*(){s.locale("tr"),yield e.getComments()})()}commentTxtChange(e){this.comment=e.target.value}getComments(){var e=this;return(0,r.Z)(function*(){const m=(yield v.Z.get(e.API_URL+"/CommentByCode/"+e.code)).data.sort((c,g)=>c.DateTime>g.DateTime?-1:c.DateTime<g.DateTime?1:0);e.comments=m})()}submitComment(){var e=this;return(0,r.Z)(function*(){const o={NameSurname:e.authService.Get().firstName+" "+e.authService.Get().lastName,Picture:e.authService.Get().photoUrl,Email:e.authService.Get().email,Code:e.code,Content:e.comment,DateTime:s().format()};yield v.Z.post(e.API_URL+"/Comment",o),e.getComments(),e.comment=""})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-comment"]],inputs:{code:"code"},decls:11,vars:4,consts:[[1,"row"],[1,"col-md-8"],[1,"card","text-white","bg-dark"],[1,"card-header","p-1"],[1,"card-body","p-1"],[4,"ngIf"],[1,"col-md-4"],["class","card text-white bg-dark",4,"ngIf"],["app-comment-row","",3,"comment",4,"ngFor","ngForOf"],["app-comment-row","",3,"comment"],[1,"text-center","p-5"],[1,"mb-2"],[1,"avatar",2,"width","29px","margin-right","3px",3,"src"],["rows","3","placeholder","Yorumunuz...",1,"form-control","p-1",2,"height","126px",3,"value","change","keyup","keydown"],[1,"card-footer","p-1"],["type","button","value","Yorum Yap",1,"btn","btn-primary","float-end",3,"click"],[1,"card-body","p-2"],["routerLink","/login"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Yorumlar"),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,_,2,1,"div",5),t.YNc(7,T,3,0,"div",5),t.qZA()()(),t.TgZ(8,"div",6),t.YNc(9,Z,10,4,"div",7),t.YNc(10,y,9,0,"div",5),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngIf",o.comments.length>0),t.xp6(1),t.Q6J("ngIf",!(o.comments.length>0)),t.xp6(2),t.Q6J("ngIf",""!==o.authService.Get().email),t.xp6(1),t.Q6J("ngIf",""===o.authService.Get().email))},dependencies:[d.sg,d.O5,u.rH,C.p]}),n})(),U=(()=>{class n{constructor(){this.code=""}ngOnInit(){new TradingView.widget({symbol:"BIST:"+this.code,width:"100%",height:"500",container_id:"tradingview_7f159",timezone:"Europe/Istanbul",theme:"dark",style:"1",locale:"tr",toolbar_bg:"#f1f3f6",enable_publishing:!1,hide_top_toolbar:!0,withdateranges:!0,range:"1D",hide_side_toolbar:!0,details:!0})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tradingview"]],inputs:{code:"code"},decls:2,vars:0,consts:[[1,"tradingview-widget-container","mt-2","mb-2"],["id","tradingview_7f159"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.qZA())}}),n})();var Y=a(1594);function A(n,i){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"app-loading",4),t.qZA()),2&n&&(t.xp6(1),t.Q6J("size",32))}function I(n,i){if(1&n&&(t.TgZ(0,"h1"),t._uU(1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span",5),t._uU(5),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.detail.Code," "),t.xp6(2),t.hij(" ",e.detail.fiyat,"\u20ba "),t.xp6(1),t.Q6J("ngClass",e.detail.yuzde.indexOf("+")>-1?"text-success":e.detail.yuzde.indexOf("-")>-1?"text-danger":""),t.xp6(1),t.hij(" ",e.detail.yuzde," ")}}function J(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.detail.Title," "),t.xp6(2),t.hij("(",e.detail.City,")")}}function S(n,i){if(1&n&&t._UZ(0,"app-tradingview",6),2&n){const e=t.oxw();t.Q6J("code",e.code)}}function N(n,i){if(1&n&&t._UZ(0,"app-comment",6),2&n){const e=t.oxw();t.Q6J("code",e.code)}}let b=(()=>{class n{constructor(e,o,m,c){this.authService=e,this.route=o,this.bistService=m,this.portfolioService=c,this.loaded=!1,this.code=""}ngOnInit(){var e=this;return(0,r.Z)(function*(){e.code=""+e.route.snapshot.paramMap.get("code"),e.detail=e.bistService.Data.find(m=>m.Code===e.code);const o=yield e.portfolioService.GetPrice(e.code);e.detail={...e.detail,...o},e.loaded=!0})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.e),t.Y36(u.gz),t.Y36(f.C),t.Y36(h.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail"]],decls:5,vars:5,consts:[["class","text-center m-5",4,"ngIf"],[4,"ngIf"],[3,"code",4,"ngIf"],[1,"text-center","m-5"],[3,"size"],[3,"ngClass"],[3,"code"]],template:function(e,o){1&e&&(t.YNc(0,A,2,1,"div",0),t.YNc(1,I,6,4,"h1",1),t.YNc(2,J,4,2,"div",1),t.YNc(3,S,1,1,"app-tradingview",2),t.YNc(4,N,1,1,"app-comment",2)),2&e&&(t.Q6J("ngIf",!o.loaded),t.xp6(1),t.Q6J("ngIf",o.loaded),t.xp6(1),t.Q6J("ngIf",o.loaded),t.xp6(1),t.Q6J("ngIf",o.loaded),t.xp6(1),t.Q6J("ngIf",o.loaded))},dependencies:[d.mk,d.O5,w,U,Y.N]}),n})()}}]);